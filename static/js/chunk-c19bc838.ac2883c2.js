(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c19bc838"],{"83b2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("路由配置")]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.routes,border:"",size:"mini","row-key":"id"}},[r("el-table-column",{attrs:{prop:"path",label:"Path",width:"200"}}),r("el-table-column",{attrs:{prop:"name",label:"Name",width:"100"}}),r("el-table-column",{attrs:{prop:"redirect",label:"Redirect",width:"140"}}),r("el-table-column",{attrs:{label:"META",align:"center"}},[r("el-table-column",{attrs:{prop:"meta.title",label:"Title",width:"100"}}),r("el-table-column",{attrs:{prop:"meta.icon",label:"Icon",width:"100"}}),r("el-table-column",{attrs:{prop:"meta.activeMenu",label:"ActiveMenu",width:"150"}}),r("el-table-column",{attrs:{prop:"meta.noCache",label:"NoCache",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{model:{value:t.row.noCache,callback:function(r){e.$set(t.row,"noCache",r)},expression:"scope.row.noCache"}})]}}])}),r("el-table-column",{attrs:{prop:"meta.breadcrumb",label:"Breadcrumb",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{model:{value:t.row.breadcrumb,callback:function(r){e.$set(t.row,"breadcrumb",r)},expression:"scope.row.breadcrumb"}})]}}])})],1),r("el-table-column",{attrs:{prop:"alwaysShow",label:"AlwaysShow",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{model:{value:t.row.alwaysShow,callback:function(r){e.$set(t.row,"alwaysShow",r)},expression:"scope.row.alwaysShow"}})]}}])}),r("el-table-column",{attrs:{prop:"hidden",label:"Hidden",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{model:{value:t.row.hidden,callback:function(r){e.$set(t.row,"hidden",r)},expression:"scope.row.hidden"}})]}}])}),r("el-table-column",{attrs:{prop:"component",label:"Component",width:"250"}}),r("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(r){return e.handlePush(t.row)}}},[e._v("节点")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.handleDelete(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1),r("el-dialog",{attrs:{title:"路由",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.route,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"ID"}},[r("el-input",{attrs:{value:e.route.id,readonly:""}})],1),r("el-form-item",{attrs:{label:"Parent"}},[r("el-select",{attrs:{placeholder:"父级",clearable:""},model:{value:e.route.parent_id,callback:function(t){e.$set(e.route,"parent_id",t)},expression:"route.parent_id"}},e._l(e.routes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"Index"}},[r("el-input",{attrs:{type:"number"},model:{value:e.route.index,callback:function(t){e.$set(e.route,"index",t)},expression:"route.index"}})],1),r("el-form-item",{attrs:{label:"Path"}},[r("el-input",{model:{value:e.route.path,callback:function(t){e.$set(e.route,"path",t)},expression:"route.path"}})],1),r("el-form-item",{attrs:{label:"Name"}},[r("el-input",{model:{value:e.route.name,callback:function(t){e.$set(e.route,"name",t)},expression:"route.name"}})],1),r("el-form-item",{attrs:{label:"Redirect"}},[r("el-input",{model:{value:e.route.redirect,callback:function(t){e.$set(e.route,"redirect",t)},expression:"route.redirect"}})],1),r("el-form-item",{attrs:{label:"Title"}},[r("el-input",{model:{value:e.route.meta.title,callback:function(t){e.$set(e.route.meta,"title",t)},expression:"route.meta.title"}})],1),r("el-form-item",{attrs:{label:"Icon"}},[r("el-input",{model:{value:e.route.meta.icon,callback:function(t){e.$set(e.route.meta,"icon",t)},expression:"route.meta.icon"}})],1),r("el-form-item",{attrs:{label:"ActiveMenu"}},[r("el-input",{model:{value:e.route.meta.activeMenu,callback:function(t){e.$set(e.route.meta,"activeMenu",t)},expression:"route.meta.activeMenu"}})],1),r("el-form-item",{attrs:{label:"Breadcrumb"}},[r("el-switch",{model:{value:e.route.meta.breadcrumb,callback:function(t){e.$set(e.route.meta,"breadcrumb",t)},expression:"route.meta.breadcrumb"}})],1),r("el-form-item",{attrs:{label:"NoCache"}},[r("el-switch",{model:{value:e.route.meta.noCache,callback:function(t){e.$set(e.route.meta,"noCache",t)},expression:"route.meta.noCache"}})],1),r("el-form-item",{attrs:{label:"AlwaysShow"}},[r("el-switch",{model:{value:e.route.alwaysShow,callback:function(t){e.$set(e.route,"alwaysShow",t)},expression:"route.alwaysShow"}})],1),r("el-form-item",{attrs:{label:"Hidden"}},[r("el-switch",{model:{value:e.route.hidden,callback:function(t){e.$set(e.route,"hidden",t)},expression:"route.hidden"}})],1),r("el-form-item",{attrs:{label:"Component"}},[r("el-input",{model:{value:e.route.component,callback:function(t){e.$set(e.route,"component",t)},expression:"route.component"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],1)},n=[],o=(r("4160"),r("159b"),r("96cf"),r("1da1")),l=r("cc5e"),i=r("ed08"),u={index:0,parent_id:"",path:"",name:"",redirect:"",meta:{title:"",icon:"",activeMenu:"",noCache:!1,breadcrumb:!0},alwaysShow:!1,hidden:!1,component:"Layout"},c={components:{},filters:{},data:function(){return{parent:"",dialogVisible:!1,route:Object.assign({},u),routesList:[],routes:[]}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["h"])();case 2:r=t.sent,a=r.data,e.routes=e.filterRoute(a),e.dialogVisible=!1,e.route=Object(i["b"])(u);case 7:case"end":return t.stop()}}),t)})))()},filterRoute:function(e){var t={};e.forEach((function(e){t[e.id]=e}));var r=[];return e.forEach((function(e){var a=t[e.parent_id];a?(a.children||(a.children=[])).push(e):r.push(e)})),console.log(r),r},handleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.route.id){t.next=8;break}return t.next=3,Object(l["j"])(e.route);case 3:r=t.sent,a=r.ret_code,0===a&&e.loadData(),t.next=13;break;case 8:return t.next=10,Object(l["b"])(e.route);case 10:n=t.sent,o=n.ret_code,0===o&&e.loadData();case 13:case"end":return t.stop()}}),t)})))()},handleCancel:function(){this.dialogVisible=!1,this.route=Object(i["b"])(u)},handleDelete:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["e"])(e);case 2:a=r.sent,n=a.ret_code,0===n&&t.loadData();case 5:case"end":return r.stop()}}),r)})))()},handlePush:function(e){this.route.parent_id=e.id,this.dialogVisible=!0},handleEdit:function(e){this.dialogVisible=!0,this.route=e}}},s=c,d=r("2877"),m=Object(d["a"])(s,a,n,!1,null,"61ff88f5",null);t["default"]=m.exports},b775:function(e,t,r){"use strict";r("caad"),r("d3b7"),r("2532");var a=r("bc3a"),n=r.n(a),o=r("5c96"),l=r("4360"),i=r("4328"),u=r.n(i),c=r("e350"),s=n.a.create({baseURL:"https://bj.xiaoyihuanbao.com",timeout:6e5});function d(e,t){Object(o["Message"])({message:e,type:t,duration:5e3})}s.interceptors.request.use((function(e){var t=window.localStorage.getItem("user_id"),r=window.localStorage.getItem("token");r&&(e.headers["token"]=r,e.headers["userId"]=t,e.headers["user_id"]=t,e.headers["companyId"]=l["a"].getters.companyId);var a=Object(c["a"])(e);return"GET"!==e.method&&e.data&&(e.data.postId=a,e.data.userId=e.data.userId||t,e.data=u.a.stringify(e.data)),e}),(function(e){return console.error("Request error:",e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 200!==e.status||0!==t.ret_code?(d(t.error_msg||t.message||"Error","error"),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){if(console.error("Response error:",e),"ECONNABORTED"===e.code&&e.message.includes("timeout")){var t=e.config;return t.__retryCount>=t.retry?Promise.reject(e):(t.__retryCount=(t.__retryCount||0)+1,new Promise((function(e){return setTimeout(e,t.retryDelay||1)})).then((function(){return s(t)})))}if(e.response)switch(e.response.status){case 401:o["MessageBox"].confirm("您的登录状态异常，您可以留在此页面，也可以重新登录！","状态异常",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){l["a"].dispatch("user/resetToken").then((function(){location.reload()}))}));break}return d(e.response?e.response.data.message:e.message,"error"),{}})),t["a"]=s},cc5e:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"j",(function(){return i})),r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"i",(function(){return s})),r.d(t,"g",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return b}));var a=r("b775");function n(){return Object(a["a"])({qs:!0,url:"/zymp/config/getAllRoute",method:"GET"})}function o(e){return Object(a["a"])({qs:!0,url:"/zymp/config/addRoute",method:"PUT",data:e})}function l(e){return Object(a["a"])({qs:!0,url:"/zymp/config/delRoute",method:"DELETE",data:{id:e}})}function i(e){return Object(a["a"])({qs:!0,url:"/zymp/config/updateRoute",method:"POST",data:e})}function u(e){return Object(a["a"])({qs:!0,url:"/authority/menu/addMenu",method:"POST",data:e})}function c(e){return Object(a["a"])({qs:!0,url:"/authority/menu/doUpdate",method:"POST",data:e})}function s(e){return Object(a["a"])({qs:!0,url:"/authority/menu/listMenuByPage",method:"GET",params:e})}function d(e){return Object(a["a"])({qs:!0,url:"/authority/menu/enableOrDisable",method:"POST",data:e})}function m(e){return Object(a["a"])({qs:!0,url:"/authority/menu/deleteMenuById",method:"POST",data:e})}function b(e){return Object(a["a"])({qs:!0,url:"/authority/role/beforeAddRole",method:"POST",data:e})}}}]);