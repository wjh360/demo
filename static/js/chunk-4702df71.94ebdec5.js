(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4702df71"],{"08f9":function(t,e,n){var r={"./bg1.vue":"b5b8","./bg2.vue":"fc40","./bg3.vue":"25f8"};function s(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id="08f9"},1103:function(t,e,n){"use strict";n("2be2")},2017:function(t,e,n){"use strict";n("cafe")},"25f8":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgBox3"},[n("iframe",{staticClass:"heroBackground_QArt",staticStyle:{border:"none",width:"100%",height:"100%",position:"absolute",bottom:"0"},attrs:{src:"https://test.xiaoyihuanbao.com/cacmsweb/asd/index.html"}})])}],a={name:"",data:function(){return{}}},o=a,i=(n("b3f4"),n("2877")),c=Object(i["a"])(o,r,s,!1,null,null,null);e["default"]=c.exports},"2be2":function(t,e,n){},"49b2":function(t,e,n){"use strict";n("6be8")},"6be8":function(t,e,n){},"6ede":function(t,e,n){},"9ed6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-container"},[t._m(0),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules}},[n("div",{staticClass:"title-container"},[n("h3",{staticClass:"title"},[t._v("小移环保云蚁系统")])]),n("el-form-item",{attrs:{prop:"telephone"}},[n("el-input",{attrs:{placeholder:"手机号",type:"text"},model:{value:t.loginForm.telephone,callback:function(e){t.$set(t.loginForm,"telephone",e)},expression:"loginForm.telephone"}},[n("template",{slot:"prepend"},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1)]),n("el-button",{attrs:{slot:"append",type:"success"},on:{click:t.sendMsg},slot:"append"},[t._v(t._s(t.smsBtn.text))])],2)],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text",placeholder:"验证码",name:"code"},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}},[n("template",{slot:"prepend"},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1)])],2)],1),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录")])],1),t._m(1),n("div",[n("div",{staticStyle:{position:"absolute",bottom:"10px",right:"10px"}},t._l(t.AllComponents,(function(e,r){return n("el-button",{key:r,attrs:{type:"primary",size:"mini"},on:{click:function(e){t.bgName=r}}},[t._v(t._s(r))])})),1),n("div",{staticClass:"bgTop"}),n(t.bgName,{tag:"component"})],1)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:"http://xyhb.cn-bj.ufileos.com/600000001_小移最终logo.png",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"footerBox"},[n("a",{attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[t._v(" 京ICP备19007553号-1 ")])])}],a=(n("13d5"),n("b64b"),n("b775"));function o(t){return Object(a["a"])({url:"/ucs/verificode",method:"GET",params:{telephone:t}})}var i=n("61f7"),c=n("c930"),u=(n("4160"),n("fb6a"),n("d3b7"),n("ac1f"),n("5319"),n("159b"),n("ddb0"),n("08f9")),l={};u.keys().forEach((function(t){var e=t.replace(/-\w/g,(function(t){return t.slice(1).toUpperCase()})),n=u(t);l[e.replace(/^\.\/(.*)\.\w+$/,"$1")]=n.default}));var d=l,f={Verify:c["a"]},h={name:"Login",components:Object.assign({},d,f),data:function(){var t=function(t,e,n){6!==e.length?n(new Error("验证码位数不正确")):n()};return{AllComponents:d,bgName:"bg1",loginForm:{telephone:"",code:""},smsBtn:{text:"发送",status:!0,codeTime:60},loginRules:{telephone:[{required:!0,trigger:"blur",validator:i["b"]}],code:[{required:!0,trigger:"blur",validator:t}]},loading:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created:function(){},methods:{sendMsg:function(){var t=this;if(!0===this.smsBtn.status&&11===this.loginForm.telephone.length)return o(this.loginForm.telephone).then((function(e){0===e.ret_code&&(t.smsBtn.status=!1,t.$message({message:e.message,type:"success"}),t.timerId=setInterval((function(){var e=t.smsBtn.codeTime;e--,t.smsBtn.codeTime=e,t.smsBtn.text=e+"S",e<1&&(clearInterval(t.timerId),t.smsBtn.text="重新获取",t.smsBtn.codeTime=60,t.smsBtn.status=!0)}),1e3))})).catch((function(e){t.smsBtn.status=!0})),!1;this.$message.error("请输入有效的手机号码")},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$store.dispatch("user/login",t.loginForm).then((function(e){t.loading=!1,0===e.ret_code&&(t.$message.success(e.message),setTimeout((function(){t.$router.push({path:t.redirect||"/",query:t.otherQuery})}),500))})).catch((function(){t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,n){return"redirect"!==n&&(e[n]=t[n]),e}),{})}}},m=h,g=(n("2017"),n("f59f"),n("49b2"),n("2877")),p=Object(g["a"])(m,r,s,!1,null,"1ae05bd0",null);e["default"]=p.exports},b3f4:function(t,e,n){"use strict";n("c26a")},b5b8:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgBox"},[n("div",{staticClass:"stars"},t._l(t.starsCount,(function(t,e){return n("div",{key:e,ref:"star",refInFor:!0,staticClass:"star"})})),0)])},s=[],a=(n("99af"),n("4160"),n("159b"),{name:"bg1",data:function(){return{starsCount:1e3,distance:1e3}},mounted:function(){var t=this,e=t.$refs.star;e.forEach((function(e){var n=.2+1*Math.random(),r=t.distance+300*Math.random();e.style.transformOrigin="0 0 ".concat(r,"px"),e.style.transform="translate3d(0,0,-".concat(r,"px) rotateY(").concat(360*Math.random(),"deg) rotateX(").concat(-50*Math.random(),"deg) scale(").concat(n,",").concat(n,")")}))}}),o=a,i=(n("c563"),n("2877")),c=Object(i["a"])(o,r,s,!1,null,null,null);e["default"]=c.exports},b775:function(t,e,n){"use strict";n("caad"),n("d3b7"),n("2532");var r=n("bc3a"),s=n.n(r),a=n("5c96"),o=n("4360"),i=n("4328"),c=n.n(i),u=n("e350"),l=s.a.create({baseURL:"https://bj.xiaoyihuanbao.com",timeout:6e5});function d(t,e){Object(a["Message"])({message:t,type:e,duration:5e3})}l.interceptors.request.use((function(t){var e=window.localStorage.getItem("user_id"),n=window.localStorage.getItem("token");n&&(t.headers["token"]=n,t.headers["userId"]=e,t.headers["user_id"]=e,t.headers["companyId"]=o["a"].getters.companyId);var r=Object(u["a"])(t);return"GET"!==t.method&&t.data&&(t.data.postId=r,t.data.userId=t.data.userId||e,t.data=c.a.stringify(t.data)),t}),(function(t){return console.error("Request error:",t),Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return 200!==t.status||0!==e.ret_code?(d(e.error_msg||e.message||"Error","error"),Promise.reject(new Error(e.message||"Error"))):e}),(function(t){if(console.error("Response error:",t),"ECONNABORTED"===t.code&&t.message.includes("timeout")){var e=t.config;return e.__retryCount>=e.retry?Promise.reject(t):(e.__retryCount=(e.__retryCount||0)+1,new Promise((function(t){return setTimeout(t,e.retryDelay||1)})).then((function(){return l(e)})))}if(t.response)switch(t.response.status){case 401:a["MessageBox"].confirm("您的登录状态异常，您可以留在此页面，也可以重新登录！","状态异常",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))}));break}return d(t.response?t.response.data.message:t.message,"error"),{}})),e["a"]=l},c26a:function(t,e,n){},c563:function(t,e,n){"use strict";n("6ede")},cafe:function(t,e,n){},e82e:function(t,e,n){},f59f:function(t,e,n){"use strict";n("e82e")},fc40:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgBox2"},[n("canvas",{attrs:{id:"star-bg-canvas"}})])}],a=(n("cb29"),{name:"bg2",data:function(){return{}},mounted:function(){var t=this;this.resizeCanvas(),window.onresize=function(){document.getElementById("star-bg-canvas").getContext&&t.resizeCanvas()}},methods:{resizeCanvas:function(){var t=document.getElementById("star-bg-canvas"),e=t.getContext("2d"),n=t.width=window.innerWidth,r=t.height=window.innerHeight,s=217,a=[],o=1200,i=0,c=new Image;c.src="https://blog.chenbitao.com/vue3-in-action/assets/T5.03361c86.jpg";var u=document.createElement("canvas"),l=u.getContext("2d");u.width=100,u.height=100;var d=u.width/2,f=l.createRadialGradient(d,d,0,d,d,d);function h(t,e){if(arguments.length<2&&(e=t,t=0),t>e){var n=e;e=t,t=n}return Math.floor(Math.random()*(e-t+1))+t}function m(t,e){var n=Math.max(t,e),r=Math.round(Math.sqrt(n*n+n*n));return r/2}f.addColorStop(.025,"#fff"),f.addColorStop(.1,"hsl("+s+", 61%, 33%)"),f.addColorStop(.25,"hsl("+s+", 64%, 6%)"),f.addColorStop(1,"transparent"),l.fillStyle=f,l.beginPath(),l.arc(d,d,d,0,2*Math.PI),l.fill();var g=function(){this.orbitRadius=h(m(n,r)),this.radius=h(60,this.orbitRadius)/12,this.orbitX=n/2,this.orbitY=r/2,this.timePassed=h(0,o),this.speed=h(this.orbitRadius)/9e5,this.alpha=h(2,10)/10,i++,a[i]=this};g.prototype.draw=function(){var t=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,n=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,r=h(10);1===r&&this.alpha>0?this.alpha-=.05:2===r&&this.alpha<1&&(this.alpha+=.05),e.globalAlpha=this.alpha,e.drawImage(u,t-this.radius/2,n-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed};for(var p=0;p<o;p++)new g;function b(){e.globalCompositeOperation="source-over",e.globalAlpha=.8,e.fillStyle="hsla("+s+", 64%, 6%, 1)",e.fillRect(0,0,n,r),e.globalCompositeOperation="lighter";for(var t=1,o=a.length;t<o;t++)a[t].draw();window.requestAnimationFrame(b)}b()}}}),o=a,i=(n("1103"),n("2877")),c=Object(i["a"])(o,r,s,!1,null,null,null);e["default"]=c.exports}}]);